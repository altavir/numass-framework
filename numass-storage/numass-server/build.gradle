description = 'dataforge-server'

//sourceSets.main.resources{
//    srcDir project(':dataforge-storage:storage-servlet').file('ratpack')
//}

//task copyAssets(type: Copy) {
//    from project(':dataforge-storage:storage-servlet').file('src/main/resouces/ratpack')
//    into 'src/main/resouces/ratpack'
//}

//processResources.dependsOn("copyAssets")

dependencies {
    compile project(':numass-storage')
    compile 'hep.dataforge:storage-servlet'//project(':dataforge-storage:storage-servlet')
    compile 'commons-daemon:commons-daemon:1.+'
}

// processResources {
//     def servletJar = configurations.compile.files { it.name.equals('storage-servlet') }
//     from zipTree(servletJar).file('/src/main/resources/ratpack')
// }

task runServer(type: JavaExec) {
    description 'Start numass server locally'

    // Set main property to name of Groovy script class.
    main = 'inr.numass.scripts.TestServer'

    // Set classpath for running the Groovy script.
    classpath = sourceSets.main.runtimeClasspath
    standardInput = System.in
}
