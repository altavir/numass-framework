rootProject.name = 'numass'

includeBuild('../dataforge'){
    dependencySubstitution {
        substitute module('hep.dataforge:dataforge-grind') with project(':detaforge-grind')
        substitute module('hep.dataforge:dataforge-storage') with project(':dataforge-storage')
        substitute module('hep.dataforge:dataforge-minuit') with project(':dataforge-stat:dataforge-minuit')
    }
}

def includeProjects
includeProjects = {File dir, String prefix ->
    dir.listFiles().each{
        String name = prefix + ":" + it.getName();
        if(it.isDirectory() && ! it.getName().startsWith("build")){
            if(new File(it, 'build.gradle').isFile()){
                include name
                project(name).projectDir = it
            }
            includeProjects(it, name);
        }
    }
}

includeProjects(rootDir, '')

//includeProjects(rootDir, '')
//
//File dataforgeDir = new File(rootDir,'../dataforge');
//
//if(dataforgeDir.exists()){
//    includeFlat "dataforge"
//    includeProjects(dataforgeDir,'')
//}
