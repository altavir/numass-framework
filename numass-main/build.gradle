apply plugin: 'application'

if (!hasProperty('mainClass')) {
    ext.mainClass = 'inr.numass.Main'
}
mainClassName = mainClass

description = "Main numass project"

dependencies {
    compile group: 'commons-cli', name: 'commons-cli', version: '1.+'
    compile group: 'commons-io', name: 'commons-io', version: '2.+'
    compile project(':dataforge-stat:dataforge-minuit')
    compile project(':numass-storage')
    compile project(':dataforge-grind:grind-terminal')
}

task listActions(dependsOn: classes, type: JavaExec) {
    main mainClass
    args "-lc"
    classpath = sourceSets.main.runtimeClasspath
    description "print a list of available actions as via -lc command line parameter"
    group "numass"
}

task workspace(dependsOn: classes, type: JavaExec) {
    main 'inr.numass.workspace.NumassGrindLauncher'
    classpath = sourceSets.main.runtimeClasspath
    args "-c \"D:\\Work\\Numass\\sterile2016\\workspace.groovy\" numass.fitsum sum_down".split()
    description "Run workspace task"
    group "numass"
}

task repl(dependsOn: classes, type: JavaExec) {
    main 'inr.numass.LaunchGrindShell'
    classpath = sourceSets.main.runtimeClasspath
    description "Start Grind repl"
    standardInput = System.in
    standardOutput = System.out
    args ["--config",]
    group "numass"
}